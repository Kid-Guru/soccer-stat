(this["webpackJsonpsoccer-stat"]=this["webpackJsonpsoccer-stat"]||[]).push([[0],{181:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(23),i=n.n(r),s=(n(91),n(92),n(32)),o=n.n(s),l=n(8),j=n(60),d=n(86),u="INITIALIZING_APP_SUCCESS",m="SET_COMPETITIONS",b="SET_TEAMS",h="SET_TEAM_CALENDAR",O="CLEAN_TEAM_CALENDAR",x="SET_COMPETITION_CALENDAR",p="CLEAN_COMPETITION_CALENDAR",f=n(77),T="/competitions",g="/teams",C="/matches",v=f.create({baseURL:"https://api.football-data.org/v2",headers:{"X-Auth-Token":"42423c99d523409aae62e30867c8bcdc"}}),N=function(e){return v.get("".concat(g,"/").concat(e).concat(C)).then((function(e){return e.data}))},y=function(e,t,n){return v.get("".concat(g,"/").concat(e).concat(C,"?dateFrom=").concat(t,"&dateTo=").concat(n)).then((function(e){return e.data}))},I=function(e,t,n){return v.get("".concat(T,"/").concat(e).concat(C,"?dateFrom=").concat(t,"&dateTo=").concat(n)).then((function(e){return e.data}))},E=function(e){var t=new Date(e);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString()}},S=function(e){return null!==e.score.penalties.homeTeam?e.score.penalties:null!==e.score.extraTime.homeTeam?e.score.extraTime:null!==e.score.fullTime.homeTeam?e.score.fullTime:null!==e.score.halfTime.homeTeam?e.score.halfTime:{homeTeam:"--",awayTeam:"--"}},w=n(49),L=n.n(w),F=function(){return function(e){Promise.all([v.get("".concat(T)).then((function(e){return e.data})),v.get("".concat(g)).then((function(e){return e.data}))]).then((function(t){var n=Object(d.a)(t,2),c=n[0],a=n[1];console.log(c,a);var r=c.competitions.filter((function(e){return"TIER_ONE"===e.plan})).map((function(e){return L()(e,["id","name","area","numberOfAvailableSeasons","code","emblemUrl"])})),i=a.teams.map((function(e){return L()(e,["id","name","shortName","area","crestUrl","website","email","founded","clubColors"])}));console.log(r,i),e({type:m,payload:{competitions:r}}),e({type:b,payload:{teams:i}})})).then((function(){e({type:u})}))}},A=function(e,t){return{type:h,payload:{matches:e,currentTeamId:t}}},_=function(e,t){return{type:x,payload:{matches:e,currentCompetitionId:t}}},k=n(16),D=n(28),R=n(187),P=n(183),M=n(189),z=n(1),U=function(){return Object(z.jsx)(R.a,{bg:"success",variant:"light",className:"bg-success",children:Object(z.jsxs)(P.a,{children:[Object(z.jsx)(R.a.Brand,{as:"h1",className:"mr-auto",children:"SoccerStat App"}),Object(z.jsxs)(M.a,{children:[Object(z.jsx)(M.a.Link,{as:D.b,to:"/competitions",children:"\u0422\u0443\u0440\u043d\u0438\u0440\u044b"}),Object(z.jsx)(M.a.Link,{as:D.b,to:"/teams",children:"\u041a\u043e\u043c\u0430\u043d\u0434\u044b"})]})]})})},B=function(e){return e.app.competitions.map((function(e){return{id:e.id,title:e.name,subtitle:e.area.name}}))},G=function(e){return e.app.teams.map((function(e){return{id:e.id,title:e.name,subtitle:e.area.name}}))},V=function(e){return e.app.teamCalendar.status},X=function(e){return e.app.teamCalendar.list},q=function(e){var t=e.app.teamCalendar.currentTeamId;return e.app.teams.find((function(e){return e.id==t}))},J=function(e){return e.app.competitionCalendar.status},H=function(e){return e.app.competitionCalendar.list},Z=function(e){var t=e.app.competitionCalendar.currentCompetitionId;return e.app.competitions.find((function(e){return e.id==t}))},K=n(84),Q=n(190),W=n(185),Y=n(188),$=n(184),ee=n(46),te=n(6),ne=function(e){var t=e.getRedirectPath,n=Object(te.g)(),c=Object(ee.a)({initialValues:{term:""},validate:function(e){var n={};return t(e.term)||(n.term="\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),n},onSubmit:function(e){n.push(t(e.term))}});return Object(z.jsx)(Y.a,{onSubmit:c.handleSubmit,children:Object(z.jsxs)(Y.a.Row,{className:"justify-content-end",children:[Object(z.jsxs)(K.a,{sm:6,md:4,lg:3,className:"mb-2 mb-sm-0",children:[Object(z.jsx)(Y.a.Control,{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",name:"term",onChange:c.handleChange,value:c.values.term,isInvalid:!!c.errors.term}),Object(z.jsx)(Y.a.Control.Feedback,{tooltip:!0,type:"invalid",children:c.errors.term})]}),Object(z.jsx)(K.a,{xs:"auto",children:Object(z.jsx)($.a,{variant:"success",type:"submit",className:"ml-auto",children:"\u041d\u0430\u0439\u0442\u0438"})})]})})},ce=function(e,t){return e.map((function(e){return Object(z.jsx)(K.a,{sm:6,md:4,lg:3,className:"mb-3",children:Object(z.jsx)(D.b,{to:t(e),className:"text-dark",children:Object(z.jsx)(Q.a,{className:"text-center h-100",children:Object(z.jsxs)(Q.a.Body,{children:[Object(z.jsx)(Q.a.Title,{children:e.title}),Object(z.jsx)(Q.a.Subtitle,{children:e.subtitle})]})})})},e.id)}))},ae=function(e){return Object(z.jsxs)(P.a,{children:[Object(z.jsx)(ne,{getRedirectPath:(t=e.getLink,n=e.listItems,function(e){var c=n.find((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));return c?t(c):null})}),Object(z.jsx)(W.a,{className:"my-4",children:ce(e.listItems,e.getLink)})]});var t,n},re=Object(k.b)((function(e){return{listItems:B(e)}}))((function(e){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h2",{className:"text-center py-4",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043b\u0438\u0433"}),Object(z.jsx)(ae,{listItems:e.listItems,getLink:function(e){return"/competitions/".concat(e.id)}})]})})),ie=Object(k.b)((function(e){return{listItems:G(e)}}))((function(e){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h2",{className:"text-center py-4",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043c\u0430\u043d\u0434"}),Object(z.jsx)(ae,{listItems:e.listItems,getLink:function(e){return"/teams/".concat(e.id)}})]})})),se=n(186),oe=function(e){var t=e.list;return 0===t.length?Object(z.jsx)("h4",{className:"text-center",children:"\u041d\u0435\u0442 \u0438\u0433\u0440. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0435\u0440\u0438\u043e\u0434."}):Object(z.jsxs)(se.a,{bordered:!0,hover:!0,size:"sm",className:"text-center",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),Object(z.jsx)("th",{children:"\u0422\u0443\u0440\u043d\u0438\u0440"}),Object(z.jsx)("th",{children:"\u0421\u043e\u043f\u0435\u0440\u043d\u0438\u043a"}),Object(z.jsx)("th",{children:"\u0421\u0447\u0435\u0442"}),Object(z.jsx)("th",{children:"\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c"})]})}),Object(z.jsx)("tbody",{children:t.map((function(e){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:e.date}),Object(z.jsx)("td",{children:e.competition.name}),Object(z.jsx)("td",{children:e.rival.name}),Object(z.jsx)("td",{children:"".concat(e.score.homeTeam,":").concat(e.score.awayTeam)}),Object(z.jsx)("td",{children:e.winner.name})]},e.id)}))})]})},le=function(e){var t=e.dateFrom,n=void 0===t?"":t,c=e.dateTo,a=void 0===c?"":c,r=e.getRedirectPath,i=Object(te.g)(),s=Object(ee.a)({initialValues:{dateFrom:n,dateTo:a},onSubmit:function(e){i.push(r(e.dateFrom,e.dateTo))}});return Object(z.jsxs)(Y.a,{onSubmit:s.handleSubmit,children:[Object(z.jsxs)(Y.a.Group,{as:W.a,controlId:"dateFrom",className:"align-items-center",children:[Object(z.jsx)(Y.a.Label,{column:!0,children:"\u041d\u0430\u0447\u0430\u043b\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430"}),Object(z.jsx)(K.a,{sm:"8",children:Object(z.jsx)(Y.a.Control,{type:"date",placeholder:"Enter email",name:"dateFrom",onChange:s.handleChange,value:s.values.dateFrom,required:!0,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",size:"sm"})})]}),Object(z.jsxs)(Y.a.Group,{as:W.a,controlId:"dateTo",className:"align-items-center",children:[Object(z.jsx)(Y.a.Label,{column:!0,children:"\u041a\u043e\u043d\u0435\u0446 \u043f\u0435\u0440\u0438\u043e\u0434\u0430"}),Object(z.jsx)(K.a,{sm:"8",children:Object(z.jsx)(Y.a.Control,{type:"date",placeholder:"Enter email",name:"dateTo",onChange:s.handleChange,value:s.values.dateTo,required:!0,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",size:"sm"})})]}),Object(z.jsx)($.a,{variant:"success",type:"submit",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"})]})},je="/competitions",de="/teams",ue="/period",me={getTeamCalendar:function(e,t,n){return function(){var c=Object(j.a)(o.a.mark((function c(a){var r,i;return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==t||void 0!==n){c.next=6;break}return c.next=3,N(e);case 3:r=c.sent,c.next=9;break;case 6:return c.next=8,y(e,t,n);case 8:r=c.sent;case 9:i=r.matches.map((function(t){return Object(l.a)(Object(l.a)({id:t.id},E(t.utcDate)),{},{competition:{id:t.competition.id,name:t.competition.name},rival:e==t.awayTeam.id?t.homeTeam:t.awayTeam,score:S(t),winner:"HOME_TEAM"===t.winner?t.homeTeam:t.awayTeam})})),a(A(i,e));case 12:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()},cleanTeamCalendar:function(){return{type:O}}},be=Object(k.b)((function(e){return{status:V(e),list:X(e),currentTeam:q(e)}}),me)((function(e){var t=Object(te.h)(),n=t.id,a=t.dateFrom,r=t.dateTo;return Object(c.useEffect)((function(){return e.getTeamCalendar(n,a,r),function(){e.cleanTeamCalendar()}}),[n,a,r]),"fetching"===e.status?null:Object(z.jsxs)(P.a,{children:[Object(z.jsx)("h2",{className:"text-center py-4",children:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u0438\u0433\u0440"}),Object(z.jsxs)(W.a,{children:[Object(z.jsx)(K.a,{lg:"6",className:"mt-3",children:Object(z.jsx)(Q.a,{className:"h-100",children:Object(z.jsx)(Q.a.Body,{children:Object(z.jsxs)(W.a,{children:[Object(z.jsx)(K.a,{xs:"auto",children:Object(z.jsx)(Q.a.Img,{src:e.currentTeam.crestUrl,style:{width:"100px"}})}),Object(z.jsxs)(K.a,{children:[Object(z.jsx)(Q.a.Title,{as:"h4",children:e.currentTeam.name}),Object(z.jsx)(Q.a.Subtitle,{as:"h5",className:"text-secondary",children:e.currentTeam.area.name}),Object(z.jsxs)(Q.a.Text,{as:"div",className:"mt-3",children:[Object(z.jsxs)("p",{className:"my-1",children:["Founded: ",e.currentTeam.founded]}),Object(z.jsxs)("p",{className:"my-1",children:["Club colors: ",e.currentTeam.clubColors]}),Object(z.jsxs)("p",{className:"my-1",children:["Email: ",Object(z.jsx)("a",{href:"mailto:".concat(e.currentTeam.email),target:"_blank",children:"props.currentTeam.email"})]})]})]})]})})})}),Object(z.jsx)(K.a,{lg:"6",className:"mt-3",children:Object(z.jsx)(Q.a,{className:"text-center className={'h-100'}",children:Object(z.jsxs)(Q.a.Body,{children:[Object(z.jsx)(Q.a.Title,{as:"h4",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0438\u043e\u0434"}),Object(z.jsx)(le,{dateFrom:a,dateTo:r,getRedirectPath:function(e,t){return"".concat(de,"/").concat(n).concat(ue,"/").concat(e,"/").concat(t)}})]})})})]}),Object(z.jsx)(W.a,{className:"mt-3",children:Object(z.jsx)(K.a,{className:"overflow-auto",children:Object(z.jsx)(oe,{list:e.list})})})]})})),he=function(e){var t=e.list;return 0===t.length?Object(z.jsx)("h4",{className:"text-center",children:"\u041d\u0435\u0442 \u0438\u0433\u0440. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0435\u0440\u0438\u043e\u0434."}):Object(z.jsxs)(se.a,{bordered:!0,hover:!0,size:"sm",className:"text-center",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),Object(z.jsx)("th",{children:"\u0425\u043e\u0437\u044f\u0435\u0432\u0430"}),Object(z.jsx)("th",{children:"\u0421\u0447\u0435\u0442"}),Object(z.jsx)("th",{children:"\u0413\u043e\u0441\u0442\u0438"}),Object(z.jsx)("th",{children:"\u0421\u0442\u0430\u0442\u0443\u0441"})]})}),Object(z.jsx)("tbody",{children:t.map((function(e){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:e.date}),Object(z.jsx)("td",{children:e.homeTeam.name}),Object(z.jsx)("td",{children:"".concat(e.score.homeTeam,":").concat(e.score.awayTeam)}),Object(z.jsx)("td",{children:e.awayTeam.name}),Object(z.jsx)("td",{children:e.status})]},e.id)}))})]})},Oe={getCompetitionCalendar:function(e,t,n){return function(){var c=Object(j.a)(o.a.mark((function c(a){var r,i;return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,I(e,t,n);case 2:r=c.sent,i=r.matches.map((function(e){return L()(e,["id","homeTeam","awayTeam","score","status","utcDate"])})).map((function(e){return Object(l.a)(Object(l.a)(Object(l.a)({},e),E(e.utcDate)),{},{score:S(e)})})),a(_(i,e));case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()},cleanCompetitionCalendar:function(){return{type:p}}},xe=Object(k.b)((function(e){return{status:J(e),list:H(e),currentCompetition:Z(e)}}),Oe)((function(e){var t=Object(te.h)(),n=t.id,a=t.dateFrom,r=t.dateTo,i=function(){var e=new Date,t=e.toLocaleDateString("ru-RU");e.setMonth(e.getMonth()-1);var n=e.toLocaleDateString("ru-RU");return{dateTo:t.split(".").reverse().join("-"),dateFrom:n.split(".").reverse().join("-")}}();a=a||i.dateFrom,r=r||i.dateTo;return Object(c.useEffect)((function(){return e.getCompetitionCalendar(n,a,r),function(){e.cleanCompetitionCalendar()}}),[n,a,r]),"fetching"===e.status?null:Object(z.jsxs)(P.a,{children:[Object(z.jsx)("h2",{className:"text-center py-4",children:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u0438\u0433\u0440"}),Object(z.jsxs)(W.a,{children:[Object(z.jsx)(K.a,{lg:"6",className:"mt-3",children:Object(z.jsx)(Q.a,{className:"h-100",children:Object(z.jsx)(Q.a.Body,{children:Object(z.jsxs)(W.a,{children:[Object(z.jsx)(K.a,{xs:"auto",children:Object(z.jsx)(Q.a.Img,{src:e.currentCompetition.emblemUrl||e.currentCompetition.area.ensignUrl,style:{width:"100px"}})}),Object(z.jsxs)(K.a,{children:[Object(z.jsx)(Q.a.Title,{as:"h4",children:e.currentCompetition.name}),Object(z.jsx)(Q.a.Subtitle,{as:"h5",className:"text-secondary",children:e.currentCompetition.area.name})]})]})})})}),Object(z.jsx)(K.a,{lg:"6",className:"mt-3",children:Object(z.jsx)(Q.a,{className:"text-center className={'h-100'}",children:Object(z.jsxs)(Q.a.Body,{children:[Object(z.jsx)(Q.a.Title,{as:"h4",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0438\u043e\u0434"}),Object(z.jsx)(le,{dateFrom:a,dateTo:r,getRedirectPath:function(e,t){return"".concat(je,"/").concat(n).concat(ue,"/").concat(e,"/").concat(t)}})]})})})]}),Object(z.jsx)(W.a,{className:"mt-3",children:Object(z.jsx)(K.a,{className:"overflow-auto",children:Object(z.jsx)(he,{list:e.list})})})]})}));var pe,fe=Object(k.b)((function(e){return{initialized:e.app.initialized}}),(function(e){return{initializingApp:function(){return e(F())}}}))((function(e){return Object(c.useEffect)((function(){e.initializingApp()}),[]),e.initialized?Object(z.jsxs)("div",{className:"App",children:[Object(z.jsx)(U,{}),Object(z.jsxs)(te.d,{children:[Object(z.jsx)(te.b,{path:"/",exact:!0,render:function(){return Object(z.jsx)(te.a,{to:je})}}),Object(z.jsx)(te.b,{path:je,exact:!0,render:function(){return Object(z.jsx)(re,{})}}),Object(z.jsx)(te.b,{path:"".concat(je,"/:id"),exact:!0,render:function(){return Object(z.jsx)(xe,{})}}),Object(z.jsx)(te.b,{path:"".concat(je,"/:id").concat(ue,"/:dateFrom/:dateTo"),exact:!0,render:function(){return Object(z.jsx)(xe,{})}}),Object(z.jsx)(te.b,{path:de,exact:!0,render:function(){return Object(z.jsx)(ie,{})}}),Object(z.jsx)(te.b,{path:"".concat(de,"/:id"),exact:!0,render:function(){return Object(z.jsx)(be,{})}}),Object(z.jsx)(te.b,{path:"".concat(de,"/:id").concat(ue,"/:dateFrom/:dateTo"),exact:!0,render:function(){return Object(z.jsx)(be,{})}})]})]}):null})),Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,191)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},ge=n(29),Ce=n(85),ve=n(19),Ne=n(64),ye={initialized:!1,competitions:[],teams:[],teamCalendar:{status:"fetching",list:[],currentTeamId:null},competitionCalendar:{status:"fetching",list:[],currentCompetitionId:null}},Ie=(pe={},Object(ve.a)(pe,u,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{initialized:!0})})),Object(ve.a)(pe,m,(function(e,t){var n=t.payload.competitions;return Object(l.a)(Object(l.a)({},e),{},{competitions:n})})),Object(ve.a)(pe,b,(function(e,t){var n=t.payload.teams;return Object(l.a)(Object(l.a)({},e),{},{teams:n})})),Object(ve.a)(pe,h,(function(e,t){var n=t.payload,c=n.matches,a=n.currentTeamId;return Object(l.a)(Object(l.a)({},e),{},{teamCalendar:Object(l.a)(Object(l.a)({},e.teamCalendar),{},{status:"received",list:Object(Ne.a)(c),currentTeamId:a})})})),Object(ve.a)(pe,O,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{teamCalendar:{status:"fetching",list:[],currentTeamId:null}})})),Object(ve.a)(pe,x,(function(e,t){var n=t.payload,c=n.matches,a=n.currentCompetitionId;return Object(l.a)(Object(l.a)({},e),{},{competitionCalendar:{status:"received",list:Object(Ne.a)(c),currentCompetitionId:a}})})),Object(ve.a)(pe,p,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{competitionCalendar:{status:"fetching",list:[],currentCompetitionId:null}})})),pe),Ee=Object(ge.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;return Ie[t.type]?Ie[t.type](e,t):e}}),Se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ge.d,we=Object(ge.e)(Ee,Se(Object(ge.a)(Ce.a)));i.a.render(Object(z.jsx)(D.a,{basename:"/soccer-stat",children:Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(k.a,{store:we,children:Object(z.jsx)(fe,{})})})}),document.getElementById("root")),Te()},91:function(e,t,n){},92:function(e,t,n){}},[[181,1,2]]]);
//# sourceMappingURL=main.af34af77.chunk.js.map